<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AcadLink | Signup</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body class="min-h-screen flex font-sans text-gray-800">

  <!-- Flash Messages -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="fixed top-4 left-1/2 transform -translate-x-1/2 w-11/12 md:w-1/2 z-50">
        {% for category, message in messages %}
          <div class="p-3 mb-2 rounded-md text-white shadow-lg
            {% if category == 'success' %} bg-green-500
            {% elif category == 'danger' %} bg-red-500
            {% elif category == 'warning' %} bg-yellow-500
            {% else %} bg-blue-500 {% endif %}">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <!-- Left Column: Signup Form -->
  <div class="w-full md:w-1/2 bg-white flex flex-col justify-center p-8">
    <!-- Logo -->
    <div class="flex items-center mb-8">
      <div class="w-16 h-16 bg-gradient-to-tr from-indigo-600 to-purple-600 text-white rounded-md flex items-center justify-center text-5xl font-bold">ðŸŽ“</div>
      <div class="ml-2">
        <h1 class="font-extrabold text-indigo-700 text-3xl">AcadLink</h1>
        <p class="text-sm text-gray-500 -mt-1">Smart Academic Manager</p>
      </div>
    </div>

    <!-- Signup Form -->
    <form class="space-y-5 w-full max-w-4xl" action="/signup" method="post">
      <h2 class="text-3xl font-bold mb-2">Create Account</h2>
      <p class="text-sm text-red-600">* Only students can register. Faculty and CR must contact admin *</p>
      <p class="text-sm">Already have an account? <a href="{{ url_for('login') }}" class="text-indigo-600 font-semibold hover:underline">Sign In</a></p>

      <!-- Name -->
      <div>
        <label class="block mb-1 font-medium">Full Name</label>
        <input type="text" name="name"
          pattern="^[A-Za-z\s]{3,50}$"
          title="Name should only contain letters and spaces (3â€“50 characters)"
          class="w-full border border-gray-300 px-4 py-2 rounded-md focus:ring-2 focus:ring-indigo-500" required>
      </div>

      <!-- Email -->
      <div>
        <label class="block mb-1 font-medium">Email Address</label>
        <input type="email" name="email"
          pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[A-Za-z]{2,}$"
          title="Enter a valid email address"
          class="w-full border border-gray-300 px-4 py-2 rounded-md focus:ring-2 focus:ring-indigo-500" required>
      </div>

      <!-- Password -->
      <div class="grid grid-cols-2 gap-4">
        <div class="relative">
          <label for="password" class="block mb-1 font-medium">Password</label>
          <input id="password" type="password" name="password"
            
            title="At least 8 characters, including uppercase, lowercase, number, and special character"
            class="w-full border border-gray-300 px-4 py-2 rounded-md focus:ring-2 focus:ring-indigo-500"
            placeholder="Enter password" required>

          <!-- Toggle Button -->
          <button type="button" id="togglePassword" class="absolute inset-y-0 right-3 flex items-center mt-6">
            <svg id="eyeIcon" xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
            </svg>
            <svg id="eyeOffIcon" xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5 text-gray-500 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M13.875 18.825A10.05 10.05 0 0112 19c-4.477 0-8.268-2.943-9.542-7a9.97 9.97 0 012.52-4.568m3.582-2.598A9.956 9.956 0 0112 5c4.477 0 8.268 2.943 9.542 7a9.969 9.969 0 01-4.042 5.108M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3l18 18" />
            </svg>
          </button>
        </div>

        <div>
          <label for="confirm_password" class="block mb-1 font-medium">Confirm Password</label>
      <input id="confirm_password" type="password" name="conpass"
        class="w-full border border-gray-300 px-4 py-2 rounded-md focus:ring-2 focus:ring-indigo-500" required>
      <p id="passwordError" class="text-red-500 text-sm hidden mt-1">Passwords do not match</p>
    </div>
      </div>

      <!-- Semester & Branch -->
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="block mb-1 font-medium">Semester</label>
          <select name="semester" class="w-full border border-gray-300 px-4 py-2 rounded-md focus:ring-2 focus:ring-indigo-500" required>
            <option value="">Select</option>
            <option>1st</option><option>2nd</option><option>3rd</option><option>4th</option>
            <option>5th</option><option>6th</option>
          </select>
        </div>
        <div>
          <label class="block mb-1 font-medium">Branch</label>
          <select name="branch" class="w-full border border-gray-300 px-4 py-2 rounded-md focus:ring-2 focus:ring-indigo-500" required>
            <option value="">Select</option>
            <option>Computer Science</option>
            <option>Information Technology</option>
            <option>BMS</option>
            <option>B.COM</option>
            <option>BAF</option>
          </select>
        </div>
      </div>

      <!-- Roll Number & Class -->
      <div>
        <label class="block mb-1 font-medium">Roll Number</label>
        <input type="text" name="roll_number" class="w-full border border-gray-300 px-4 py-2 rounded-md focus:ring-2 focus:ring-indigo-500" required>
        <label class="block mb-1 font-medium">Class</label>
        <input type="text" name="Class" class="w-full border border-gray-300 px-4 py-2 rounded-md focus:ring-2 focus:ring-indigo-500" required>
      </div>

      <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 rounded-md transition">Sign Up</button>
    </form>

    <!-- Footer -->
    <p class="text-xs text-center mt-8 text-gray-400">
      &copy; 2025 AcadLink. All rights reserved. <br>
      <a href="#" class="underline">Terms of Service</a> â€¢ <a href="#" class="underline">Privacy Policy</a>
    </p>
  </div>

  <!-- Right Column -->
  <div class="hidden md:block w-1/2 relative bg-gradient-to-br from-purple-700 to-indigo-800">
    <img src="{{ url_for('static', filename='bg.png') }}" alt="Signup Illustration" class="inset-0 h-full w-full object-cover" />
  </div>

  <script>
    document.getElementById("togglePassword").addEventListener("click", function () {
      const passwordField = document.getElementById("password");
      const eyeIcon = document.getElementById("eyeIcon");
      const eyeOffIcon = document.getElementById("eyeOffIcon");

      if (passwordField.type === "password") {
        passwordField.type = "text";
        eyeIcon.classList.add("hidden");
        eyeOffIcon.classList.remove("hidden");
      } else {
        passwordField.type = "password";
        eyeIcon.classList.remove("hidden");
        eyeOffIcon.classList.add("hidden");
      }
    });
  </script>
  <script>
  function validatePasswords() {
    const password = document.getElementById("password").value;
    const confirmPassword = document.getElementById("confirm_password").value;
    const error = document.getElementById("passwordError");

    if (password !== confirmPassword) {
      error.classList.remove("hidden");
      return false; // Prevent form submission
    } else {
      error.classList.add("hidden");
      return true;
    }
  }
</script>

</body>
</html>
